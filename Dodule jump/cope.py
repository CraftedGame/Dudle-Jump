import telebot
from telebot.types import Message
bot = telebot.TeleBot('7376695289:AAHrph456LH8qq8s_Q1cHDd4UscYAC5mq8A')
nc = []
pc = '@'
capitals = [
    "амстердам",
    "андорра-ла-велья",
    "белград",
    "берлин",
    "берн",
    "братислава",
    "брюссель",
    "будапешт",
    "бухарест",
    "вадуц",
    "валлетта",
    "варшава",
    "ватикан",
    "вена",
    "вильнюс",
    "дублин",
    "загреб",
    "киев",
    "кишинёв",
    "копенгаген",
    "лиссабон",
    "лондон",
    "любляна",
    "люксембург",
    "мадрид",
    "минск",
    "монако",
    "москва",
    "осло",
    "париж",
    "подгорица",
    "прага",
    "рейкьявик",
    "рига",
    "рим",
    "сан-марино",
    "сараево",
    "скопье",
    "софия",
    "стокгольм",
    "таллин",
    "тирана",
    "хельсинки",
    "абу-даби",
    "амман",
    "анкара",
    "астана",
    "ашхабад",
    "багдад",
    "баку",
    "бангкок",
    "бандар-сери-бегаван",
    "бейрут",
    "бишкек",
    "вьентьян",
    "дакка",
    "дамаск",
    "джакарта",
    "дили",
    "доха",
    "душанбе",
    "ереван",
    "иерусалим",
    "исламабад",
    "кабул",
    "катманду",
    "куала-лумпур",
    "мале",
    "манама",
    "манила",
    "маскат",
    "нейпьидо",
    "никосия",
    "пекин",
    "пномпень",
    "пхеньян",
    "сана",
    "сеул",
    "сингапур",
    "ташкент",
    "тбилиси",
    "тегеран",
    "токио",
    "тхимпху",
    "улан-батор",
    "ханой",
    "эль-кувейт",
    "эр-рияд",
    "абуджа",
    "аддис-абеба",
    "аккра",
    "алжир",
    "антананариву",
    "асмэра",
    "бамако",
    "банги",
    "банжул",
    "бисау",
    "браззавиль",
    "виктория",
    "виндхук",
    "габороне",
    "гитега",
    "дакар",
    "джибути",
    "джуба",
    "додома",
    "каир",
    "кампала",
    "кигали",
    "киншаса",
    "конакри",
    "либревиль",
    "лилонгве",
    "ломе",
    "луанда",
    "лусака",
    "малабо",
    "мапуту",
    "масеру",
    "мбабане",
    "могадишо",
    "монровия",
    "морони",
    "найроби",
    "нджамена",
    "ниамей",
    "нуакшот",
    "порт-луи",
    "порто-ново",
    "прая",
    "претория",
    "рабат",
    "сан-томе",
    "триполи",
    "тунис",
    "уагадугу",
    "фритаун",
    "хараре",
    "хартум",
    "ямусукро",
    "яунде",
    "асунсьон",
    "бастер",
    "бельмопан",
    "богота",
    "бразилиа",
    "бриджтаун",
    "буэнос-айрес",
    "вашингтон",
    "гавана",
    "гватемала",
    "джорджтаун",
    "каракас",
    "кастри",
    "кингстаун",
    "кингстон",
    "кито",
    "лима",
    "манагуа",
    "мехико",
    "монтевидео",
    "нассау",
    "оттава",
    "панама",
    "парамарибо",
    "порт-о-пренс",
    "порт-оф-спейн",
    "розо",
    "сан-сальвадор",
    "сан-хосе",
    "санто-доминго",
    "сантьяго",
    "сент-джонс",
    "сент-джорджес",
    "сукре",
    "тегусигальпа",
    "апиа",
    "веллингтон",
    "канберра",
    "маджуро",
    "нгерулмуд",
    "нукуалофа",
    "паликир",
    "порт-вила",
    "порт-морсби",
    "сува",
    "фунафути",
    "хониара",
]
rc = capitals.copy()

@bot.message_handler(commands=['start'])
def process_start_command(message):
    bot.send_message(message.from_user.id, 'Вас приветствует викторина!\nНапишите мне любую столицу')
@bot.message_handler(content_types=['text'])
def process_messages(message: Message):
    global nc, pc, rc
    text = message.text.lower()
    if text not in capitals:
        bot.send_message(message.from_user.id, 'Такой столицы не существует')
    elif text == nc:
        bot.send_message(message.from_user.id, 'Эта столица уже была названа!')
    elif pc != '@' and pc[-1] != text[0]:
        bot.send_message(message.from_user.id, 'Ошибка! Столица должна начинаться на последнюю букву ' + pc[-1])
    else:
        сс = None
        for capital in rc:
            if capital[0] == text[-1]:
                cc = capital
                nc.append(capital)
                nc.append(text)
                rc.remove(capital)
                rc.remove(text)
                break
        if cc is None:
            bot.send_message(message.from_user.id, 'Ты выиграл!')
            nc = []
            rc = capitals.copy()
            pc = '@'
        else:
            pc = cc
            bot.send_message(message.from_user.id, cc.capitalize())
bot.polling(none_stop=True, interval = 0)

